<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OG Image Generator</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        #container {
            max-width: 1200px;
            margin: 0 auto;
        }
        #svgContainer {
            border: 1px solid #ccc;
            background: white;
            margin: 20px 0;
        }
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
            margin: 10px 5px;
        }
        button:hover {
            background: #005a87;
        }
        #canvas {
            border: 1px solid #ddd;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>OG Image Generator</h1>
        <p>This tool converts the SVG to PNG at 1200x630 resolution.</p>
        
        <button onclick="loadSVG()">Load SVG</button>
        <button onclick="generatePNG()">Generate PNG</button>
        <button onclick="downloadPNG()">Download PNG</button>
        
        <div id="svgContainer"></div>
        <canvas id="canvas" width="1200" height="630"></canvas>
    </div>

    <script>
        async function loadSVG() {
            try {
                // Try to fetch the SVG file
                const response = await fetch('./household-budget-og.svg');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                const svgText = await response.text();
                document.getElementById('svgContainer').innerHTML = svgText;
                console.log('SVG loaded successfully');
            } catch (error) {
                console.error('Error loading SVG:', error);
                // Fallback: embed the SVG directly
                embedSVGDirectly();
            }
        }

        function embedSVGDirectly() {
            // Direct SVG content as fallback
            const svgContent = `<svg width="1200" height="630" viewBox="0 0 1200 630" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Golden gradient for highlighted text -->
    <linearGradient id="golden-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#d4af37"/>
      <stop offset="25%" style="stop-color:#f4e07b"/>
      <stop offset="50%" style="stop-color:#d4af37"/>
      <stop offset="75%" style="stop-color:#b8941f"/>
      <stop offset="100%" style="stop-color:#d4af37"/>
    </linearGradient>
    
    <!-- Health score gradient -->
    <linearGradient id="health-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="50%" style="stop-color:#eab308"/>
      <stop offset="100%" style="stop-color:#22c55e"/>
    </linearGradient>
  </defs>
  
  <!-- Dark background -->
  <rect width="1200" height="630" fill="#101010"/>
  
  <!-- Progress stepper - properly aligned with card content area (starts at x=610 to match card padding) -->
  <g transform="translate(610, 30)">
    <!-- Step 1: Inkomst - aligned with card's left content area -->
    <circle cx="0" cy="35" r="18" fill="#22c55e" stroke="none"/>
    <path d="M-7 35 L-3 39 L7 29" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <text x="0" y="65" font-family="Inter, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Inkomst</text>
    
    <!-- Line 1 - evenly distributed -->
    <line x1="18" y1="35" x2="117" y2="35" stroke="#22c55e" stroke-width="3"/>
    
    <!-- Step 2: L친n -->
    <circle cx="135" cy="35" r="18" fill="#22c55e" stroke="none"/>
    <path d="M128 35 L132 39 L142 29" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <text x="135" y="65" font-family="Inter, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">L친n</text>
    
    <!-- Line 2 -->
    <line x1="153" y1="35" x2="252" y2="35" stroke="#22c55e" stroke-width="3"/>
    
    <!-- Step 3: Utgifter - centered -->
    <circle cx="270" cy="35" r="18" fill="#22c55e" stroke="none"/>
    <path d="M263 35 L267 39 L277 29" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <text x="270" y="65" font-family="Inter, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Utgifter</text>
    
    <!-- Line 3 -->
    <line x1="288" y1="35" x2="387" y2="35" stroke="#22c55e" stroke-width="3"/>
    
    <!-- Step 4: Summering -->
    <circle cx="405" cy="35" r="18" fill="#22c55e" stroke="none"/>
    <path d="M398 35 L402 39 L412 29" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <text x="405" y="65" font-family="Inter, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Summering</text>
    
    <!-- Line 4 -->
    <line x1="423" y1="35" x2="522" y2="35" stroke="#8c8c8c" stroke-width="3"/>
    
    <!-- Step 5: Resultat - aligned with card's right content area -->
    <circle cx="540" cy="35" r="18" fill="none" stroke="#ffffff" stroke-width="3"/>
    <text x="540" y="42" font-family="Inter, sans-serif" font-size="18" font-weight="700" fill="#ffffff" text-anchor="middle">5</text>
    <text x="540" y="65" font-family="Inter, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Resultat</text>
  </g>
  
  <!-- B Logo Badge -->
  <rect x="34" y="140" width="60" height="60" rx="12" fill="#1a1a1a" stroke="#333333" stroke-width="1"/>
  <text x="64" y="180" font-family="Georgia, serif" font-size="36" font-weight="700" fill="url(#golden-gradient)" text-anchor="middle">B</text>
  
  <!-- Brand name with logo -->
  <text x="110" y="180" font-family="Georgia, serif" font-size="40" font-weight="700" fill="#ffffff">
    Budget<tspan font-style="italic">kollen</tspan>
  </text>
  
  <!-- Main heading -->
  <text x="60" y="260" font-family="Georgia, serif" font-size="48" font-weight="700" fill="#ffffff">
    Hush친llsbudget
  </text>
  
  <!-- Highlighted subheading -->
  <text x="60" y="320" font-family="Georgia, serif" font-size="48" font-weight="700" fill="url(#golden-gradient)">
    kalkylator
  </text>
  
  <!-- Subtitle -->
  <text x="60" y="370" font-family="Inter, sans-serif" font-size="20" fill="#8c8c8c">
    F친 koll p친 din ekonomi p친 3 minuter med v친r 5-stegs guide
  </text>
  
  <!-- Results card - enlarged -->
  <g transform="translate(580, 110)">
    <!-- Card background - made bigger -->
    <rect x="0" y="0" width="590" height="500" rx="12" fill="#1a1a1a" stroke="#333333" stroke-width="1"/>
    
    <!-- Results header -->
    <text x="30" y="40" font-family="Inter, sans-serif" font-size="20" font-weight="600" fill="#ffffff">游늵 Ber칛kningsresultat</text>
    
    <!-- Key metrics grid -->
    <!-- Row 1 -->
    <text x="30" y="80" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">R칛nta</text>
    <text x="30" y="105" font-family="Inter, sans-serif" font-size="22" font-weight="600" fill="#ffffff">3,50 %</text>
    
    <text x="200" y="80" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Amortering</text>
    <text x="200" y="105" font-family="Inter, sans-serif" font-size="22" font-weight="600" fill="#ffffff">2,00 %</text>
    
    <text x="370" y="80" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Boendekostnad</text>
    <text x="370" y="105" font-family="Inter, sans-serif" font-size="22" font-weight="600" fill="#ffffff">24 583 kr</text>
    
    <!-- Row 2 -->
    <text x="30" y="150" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Totala utgifter</text>
    <text x="30" y="175" font-family="Inter, sans-serif" font-size="22" font-weight="600" fill="#ffffff">24 583 kr</text>
    
    <text x="200" y="150" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Total inkomst</text>
    <text x="200" y="175" font-family="Inter, sans-serif" font-size="22" font-weight="600" fill="#ffffff">77 370 kr</text>
    
    <text x="370" y="150" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Kvar att spara</text>
    <text x="370" y="175" font-family="Inter, sans-serif" font-size="22" font-weight="600" fill="#22c55e">52 787 kr</text>
    
    <!-- Health score section -->
    <line x1="30" y1="210" x2="530" y2="210" stroke="#333333" stroke-width="1"/>
    
    <text x="30" y="240" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">游뽘 Ekonomiskt h칛lsotillst친nd</text>
    <text x="30" y="265" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Totalpo칛ng</text>
    
    <!-- Health score number and bar -->
    <text x="30" y="300" font-family="Inter, sans-serif" font-size="36" font-weight="700" fill="#eab308">67</text>
    <rect x="100" y="285" width="380" height="10" rx="5" fill="#333333"/>
    <rect x="100" y="285" width="255" height="10" rx="5" fill="url(#health-gradient)"/>
    
    <!-- Nyckeltal section -->
    <text x="30" y="330" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">Nyckeltal</text>
    
    <!-- Metrics - arranged in 2x2 grid -->
    <text x="30" y="360" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Skuldkvot</text>
    <text x="30" y="380" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">0.8x</text>
    
    <text x="200" y="360" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Buffertt칛ckning</text>
    <text x="200" y="380" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">2033.9%</text>
    
    <text x="370" y="360" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Boendekostnadsgrad</text>
    <text x="370" y="380" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">31.8%</text>
    
    <text x="30" y="420" font-family="Inter, sans-serif" font-size="14" fill="#8c8c8c">Disponibel inkomst</text>
    <text x="30" y="440" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">68.2%</text>
    
    <!-- Recommendation section - moved below Disponibel inkomst -->
    <text x="200" y="420" font-family="Inter, sans-serif" font-size="18" font-weight="600" fill="#ffffff">Rekommendationer</text>
    
    <rect x="200" y="430" width="360" height="50" rx="8" fill="#1e3a8a"/>
    <text x="215" y="450" font-family="Inter, sans-serif" font-size="12" fill="#93c5fd">
      Dina boendekostnader 칛r h칬ga i f칬rh친llande till din inkomst.
    </text>
    <text x="215" y="465" font-family="Inter, sans-serif" font-size="12" fill="#93c5fd">
      Fundera p친 s칛tt att minska boendekostnaderna.
    </text>
  </g>
</svg>`;
            
            document.getElementById('svgContainer').innerHTML = svgContent;
            console.log('SVG embedded directly');
        }

        function generatePNG() {
            const svgElement = document.querySelector('#svgContainer svg');
            if (!svgElement) {
                alert('Please load SVG first');
                return;
            }

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            // Create a new image
            const img = new Image();
            
            img.onload = function() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw the image
                ctx.drawImage(img, 0, 0, 1200, 630);
                console.log('PNG generated successfully');
            };
            
            img.onerror = function() {
                console.error('Error loading SVG as image');
                alert('Error generating PNG');
            };
            
            // Convert SVG to data URL
            const svgData = new XMLSerializer().serializeToString(svgElement);
            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const svgUrl = URL.createObjectURL(svgBlob);
            
            img.src = svgUrl;
        }

        function downloadPNG() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            // Check if canvas has content
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const hasContent = imageData.data.some(channel => channel !== 0);
            
            if (!hasContent) {
                alert('Please generate PNG first');
                return;
            }
            
            // Create download link
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'household-budget-og.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 'image/png');
        }

        // Auto-load SVG on page load
        window.addEventListener('load', loadSVG);
    </script>
</body>
</html>